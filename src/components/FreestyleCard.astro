---
import {convertToEmbed} from "../lib/utils";

const {title, img, subtitle, date, url, first, final} = Astro.props;
---

<div class="freeCard flex flex-col h-full justify-around items-center relative">
  <card
    class="p-2 bg-[#00C0C8]/30 h-[70%] rounded-md w-[80%] border-2 border-transparent transition-all hover:bg-[#D9D9D9]/30 hover:scale-105 hover:border-[#00C0C8] hover:-translate-y-3"
  >
    <div class="min-h-16 flex items-center justify-center">
      <h3 class="text-lg md:text-2xl font-bold text-center self-center">
        {title}
      </h3>
    </div>
    <div class="relative">
      <img
        src={img}
        loading="lazy"
        class="clip-full-rounded-sm-image-yt md:clip-full-rounded-md-image-yt cursor-pointer video-container"
        data-clip-item
        data-url={convertToEmbed(url) ?? "dQw4w9WgXcQ"}
      />
      <img
        src="/play-button.svg"
        class="absolute w-10 h-10 top-[calc(50%-20px)] right-[calc(50%-20px)] opacity-80 cursor-pointer"
      />
    </div>
    <h5 class="text-sm md:text-base font-semibold text-white/70 text-center">
      {subtitle}
    </h5>
  </card>
  <div
    class=`${first ? "dateFirst" : ""} ${final ? "dateFinal" : ""} relative flex flex-col items-center w-full mt-3`
  >
    <div class="circle w-4 h-4 rounded-full bg-white z-[100]"></div>
    <span class="text-sm md:text-base font-semibold">{date}</span>
    {
      !first && !final && (
        <div class="absolute w-full h-[49px] border-t-2 border-[#797979] -bottom-4" />
      )
    }
  </div>
</div>

<style>
  .dateFirst {
    :before {
      content: "";
      position: absolute;
      width: 50%;
      height: 49px;
      bottom: -16px;
      left: 50%;
      border-top: 2px solid #797979;
    }
    :after {
      content: "";
      position: absolute;
      width: 8px;
      height: 49px;
      bottom: -16px;
      left: 50%;
      border-top: 2px solid #ffffff;
    }
  }
  .dateFinal {
    :before {
      content: "";
      position: absolute;
      width: 50%;
      height: 49px;
      bottom: -16px;
      left: 0%;
      border-top: 2px solid #797979;
    }

    :after {
      content: "";
      position: absolute;
      width: 8px;
      height: 49px;
      bottom: -16px;
      left: calc(50% - 8px);
      border-top: 2px solid #ffffff;
    }
  }
</style>
